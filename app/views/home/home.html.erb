<%= content_for :scripts do %>
  <%= javascript_pack_tag "duration" %>
<% end %>


<div class="row m-0 p-0">
  <div class="col-12 col-lg-9 order-2 order-lg-1 m-0 p-0">

    <div class="row m-0 px-4">
      <div class="col-12 d-flex justify-content-between align-items-center p-0 py-3 m-0 homeSearch-container">
        <h4 class="m-0 p-0">Dashboard</h4>
        <div class="search-container">
          <input type="text" placeholder="Search anything...">
          <button>
            <%= image_tag("icons/search_icon.png") %>
          </button>
        </div>
      </div>

      <%= render partial: "calendar" %>
    </div>

  </div>
  <div class="col-12 col-lg-3 order-1 order-lg-2 rightSide-container">

    <div class="profileDetails-container">
      <div>
        <h6 class="profileDetails-name"><b><%= current_user.email %></b></h6>
        <p class="profileDetails-jobTitle">Web developer</p>
      </div>
      <%= image_tag("icons/home_icon.png") %>
    </div>

    <%= form_with url: root_path, method: :get do |form| %>
      <%= form.date_field :start_date, class: "form-control", value: @start_date %>
      <%= form.submit :Search, class: "date-button" %>
    <% end %>



    <div class="arrow-divider"></div>

    <div class="weeklySummary-container">
      <h4>Week information</h4>

      <table class="table table-striped">
        <tr>
          <th>Category</th>
          <th>Count</th>
          <th>Duration</th>
        </tr>
        <% all_categories_stats(@week_tickets).each do |category, dict| %>
          <tr>
            <td><%= category %></td>
            <td><%= dict[:count] %></td>
            <td><%= time_conversion(dict[:duration].to_i) %></td>
          </tr>
        <% end %>
      </table>
    </div>
    <span>Total tickets: <%= total_tickets(@week_tickets) %></span>

  </div>
</div>
